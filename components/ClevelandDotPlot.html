{#each $data as row}
	<g>
		<line x1="{Math.min(...circleXValues(row))}" y1="{$yGet(row) + midHeight}" x2="{Math.max(...circleXValues(row))}" y2="{$yGet(row) + midHeight}"></line>

		{#each circleXValues(row) as circleX, i}
			<circle cx="{circleX}" cy="{$yGet(row) + midHeight}" r="5" fill="{colorScale($custom.itemNames[i])}"></circle>
		{/each}
	</g>
{/each}

<style>
	line {
		stroke-width: 1px;
		stroke: #000;
	}
	circle {
		stroke: #000;
		stroke-width: 1px;
	}
</style>

<script>
import { scaleOrdinal } from 'd3-scale';

export default {
	namespace: 'svg',
	computed: {
		midHeight: ({ $yScale }) => {
			return $yScale.bandwidth() / 2;
		},
		circleXValues: ({ $xGet }) => {
			return row => {
				return $xGet(row);
			};
		},
		colorScale: ({ $custom, opts }) => {
			return scaleOrdinal()
				.domain($custom.itemNames)
				.range(opts.colors);
		}
	}
};
</script>
